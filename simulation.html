<html>
    <head>
        <meta charset="utf-8">
        <title>Visual Verilog simulation</title>
        <link rel="stylesheet" type="text/css" href="styles.css">
        <script src="js/blockly_compressed.js"></script>
        <script src="js/blocks_compressed.js"></script>
        <script src="js/verilog_compressed.js"></script>
        <script src="js/en.js"></script>
        <script src="js/customBlocks.js"></script>
        <script src="js/logic.js"></script>
        <script src="js/math.js"></script>
        <script src="js/variables.js"></script>
        <script src="js/custom.js"></script>
        <script src="generators/verilog.js"></script>
        <script src="generators/verilog/custom.js"></script>
        <script src="generators/verilog/math.js"></script>
        <script src="generators/verilog/logic.js"></script>
        <script src="generators/verilog/loops.js"></script>
        <script src="generators/verilog/variables.js"></script>
        <script src="generators/verilog/variables_dynamic.js"></script>
    </head>
    <body>
        <div>
            <button type="button" style="vertical-align:middle" onclick="ShowVerCode()">
                <span>Show Verilog testbench</span>
            </button>
        </div>

        <div id="blocklyDiv">
            <xml id="toolbox" style="display: none">
                <category name="Dynamic Variables" colour="110" custom="VARIABLE">
                </category>
                <category name="Simulation1" colour="270">
                    <block type="module_test"></block>
                    <block type="intial"></block>
                    <block type="end_module"></block>
                    <block type="input_simu"></block>
                    <block type="output_simu"></block>
                </category>
                <category name="Simulation2" colour="300">
                    <block type="display_block"></block>
                    <block type="monitor_block"></block>
                    <block type="time_block"></block>
                    <block type="finish_block"></block>
                </category>
                <category name="Numbers" colour="330">
                    <block type="math_number"></block>
                    <block type="decimal_binary"></block>
                    <block type="decimal_hexa"></block>
                    <block type="decimal_octa"></block>
                    <block type="decimal_binary_return"></block>
                    <block type="decimal_hexa_return"></block>
                    <block type="decimal_octal_return"></block>
                </category>
            </xml>
        </div>
        <script>
            var workspace = Blockly.inject('blocklyDiv',
                    {toolbox: document.getElementById('toolbox'),
                    grid:
                        {
                        spacing: 20,
                        length: 3,
                        colour: '#aaa',
                        snap: true},
                        trashcan: true
                    ,
                    zoom: 
                    {
                        controls: true,
                        wheel: true,
                        startScale: 1.0,
                        maxScale: 3,
                        minScale: 0.3,
                        scaleSpeed: 1.2},
                        trashcan: true
                });

                function ShowVerCode(){
                    Blockly.Verilog.INFINITE_LOOP_TRAP = null;
                    var code = Blockly.Verilog.workspaceToCode(workspace)
                    alert(code)
                };
        </script>
    </body>
</html>